/** form-saver v6.0.2, by Chris Ferdinandi | http://github.com/cferdinandi/form-saver | Licensed under MIT: http://gomakethings.com/mit/ */
!function(e,t){"function"==typeof define&&define.amd?define("formSaver",t(e)):"object"==typeof exports?module.exports=t(e):e.formSaver=t(e)}(this,function(e){"use strict";var t,a,o,n,r={},l=!!document.querySelector&&!!e.addEventListener&&!!e.localStorage,c={save:[],del:[]},s={deleteClear:!0,saveMessage:"Saved!",deleteMessage:"Deleted!",saveClass:"",deleteClass:"",initClass:"js-form-saver",callbackBeforeSave:function(){},callbackAfterSave:function(){},callbackBeforeDelete:function(){},callbackAfterDelete:function(){},callbackBeforeLoad:function(){},callbackAfterLoad:function(){}},i=function(e,t,a){if("[object Object]"===Object.prototype.toString.call(e))for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(a,e[o],o,e);else for(var n=0,r=e.length;r>n;n++)t.call(a,e[n],n,e)},u=function(e,t){var a={};return i(e,function(t,o){a[o]=e[o]}),i(t,function(e,o){a[o]=t[o]}),a},d=function(e){return e&&"object"==typeof JSON&&"function"==typeof JSON.parse?JSON.parse(e):{}};return r.saveForm=function(e,t,a,o){var n=u(n||s,a||{}),r=d(e?e.getAttribute("data-options"):null);n=u(n,r);var l=document.querySelector(t),c="formSaver-"+l.id,f={},m=l.elements,v=l.querySelectorAll("[data-form-status]"),S=function(e){e.hasAttribute("data-form-no-save")||("radio"===e.type.toLowerCase()||"checkbox"===e.type.toLowerCase()?e.checked===!0&&(f[e.name+e.value]="on"):"hidden"!==e.type.toLowerCase()&&"submit"!==e.type.toLowerCase()&&e.value&&""!==e.value&&(f[e.name]=e.value))},b=function(e,t,a){e.innerHTML=""===a?"<div>"+t+"</div>":'<div class="'+a+'">'+t+"</div>"};e&&("a"===e.tagName.toLowerCase()||"button"===e.tagName.toLowerCase())&&o&&o.preventDefault(),n.callbackBeforeSave(e,l),i(m,function(e){S(e)}),i(v,function(e){b(e,n.saveMessage,n.saveClass)}),localStorage.setItem(c,JSON.stringify(f)),n.callbackAfterSave(e,l)},r.deleteForm=function(e,t,a,o){var n=u(n||s,a||{}),r=d(e?e.getAttribute("data-options"):null);n=u(n,r);var l=document.querySelector(t),c="formSaver-"+l.id,f=l.querySelectorAll("[data-form-status]"),m=""===n.deleteClass?"<div>"+n.deleteMessage+"</div>":'<div class="'+n.deleteClass+'">'+n.deleteMessage+"</div>",v=function(){n.deleteClear===!0||"true"===n.deleteClear?(sessionStorage.setItem(c+"-formSaverMessage",m),location.reload(!1)):i(f,function(e){e.innerHTML=m})};e&&("a"===e.tagName.toLowerCase()||"button"===e.tagName.toLowerCase())&&o&&o.preventDefault(),n.callbackBeforeDelete(e,l),localStorage.removeItem(c),v(),n.callbackAfterDelete(e,l)},r.loadForm=function(e,t){var a=u(a||s,t||{}),o="formSaver-"+e.id,n=JSON.parse(localStorage.getItem(o)),r=e.elements,l=e.querySelectorAll("[data-form-status]"),c=function(e){n&&("radio"===e.type.toLowerCase()||"checkbox"===e.type.toLowerCase()?"on"===n[e.name+e.value]&&(e.checked=!0):"hidden"!==e.type.toLowerCase()&&"submit"!==e.type.toLowerCase()&&n[e.name]&&(e.value=n[e.name]))},d=function(e){e.innerHTML=sessionStorage.getItem(o+"-formSaverMessage"),sessionStorage.removeItem(o+"-formSaverMessage")};a.callbackBeforeLoad(e),i(r,function(e){c(e)}),i(l,function(e){d(e)}),a.callbackAfterLoad(e)},r.destroy=function(){t&&(document.documentElement.classList.remove(t.initClass),o&&(i(o,function(e,t){e.removeEventListener("click",c.save[t],!1)}),c.save=[]),n&&(i(n,function(e,t){e.removeEventListener("click",c.del[t],!1)}),c.del=[]),t=null,a=null,o=null,n=null)},r.init=function(e){l&&(r.destroy(),t=u(s,e||{}),a=document.forms,o=document.querySelectorAll("[data-form-save]"),n=document.querySelectorAll("[data-form-delete]"),document.documentElement.className+=(document.documentElement.className?" ":"")+t.initClass,i(o,function(e,a){c.save[a]=r.saveForm.bind(null,e,e.getAttribute("data-form-save"),t),e.addEventListener("click",c.save[a],!1)}),i(n,function(e,a){c.del[a]=r.deleteForm.bind(null,e,e.getAttribute("data-form-delete"),t),e.addEventListener("click",c.del[a],!1)}),i(a,function(e){r.loadForm(e,t)}))},r});