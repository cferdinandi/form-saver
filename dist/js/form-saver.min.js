/** form-saver v6.0.0, by Chris Ferdinandi | http://github.com/cferdinandi/form-saver | Licensed under MIT: http://gomakethings.com/mit/ */
!function(e,t){"function"==typeof define&&define.amd?define("formSaver",t(e)):"object"==typeof exports?module.exports=t(e):e.formSaver=t(e)}(this,function(e){"use strict";var t,a,o,n,r={},l=!!document.querySelector&&!!e.addEventListener&&!!e.localStorage,c={save:[],del:[]},s={deleteClear:!0,saveMessage:"Saved!",deleteMessage:"Deleted!",saveClass:"",deleteClass:"",initClass:"js-form-saver",callbackBeforeSave:function(){},callbackAfterSave:function(){},callbackBeforeDelete:function(){},callbackAfterDelete:function(){},callbackBeforeLoad:function(){},callbackAfterLoad:function(){}},i=function(e,t,a){if("[object Object]"===Object.prototype.toString.call(e))for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(a,e[o],o,e);else for(var n=0,r=e.length;r>n;n++)t.call(a,e[n],n,e)},d=function(e,t){var a={};return i(e,function(t,o){a[o]=e[o]}),i(t,function(e,o){a[o]=t[o]}),a},u=function(e){return e&&"object"==typeof JSON&&"function"==typeof JSON.parse?JSON.parse(e):{}};return r.saveForm=function(e,t,a,o){var n=d(n||s,a||{}),r=u(e?e.getAttribute("data-options"):null);n=d(n,r);var l=t.id&&""!==t.id?"formSaver-"+t.id:"formSaver-"+document.URL,c={},f=t.elements,m=t.querySelectorAll("[data-form-status]"),v=function(e){e.hasAttribute("data-form-no-save")||("radio"===e.type.toLowerCase()||"checkbox"===e.type.toLowerCase()?e.checked===!0&&(c[e.name+e.value]="on"):"hidden"!==e.type.toLowerCase()&&"submit"!==e.type.toLowerCase()&&e.value&&""!==e.value&&(c[e.name]=e.value))},S=function(e,t,a){e.innerHTML=""===a?"<div>"+t+"</div>":'<div class="'+a+'">'+t+"</div>"};e&&("a"===e.tagName.toLowerCase()||"button"===e.tagName.toLowerCase())&&o&&o.preventDefault(),n.callbackBeforeSave(e,t),i(f,function(e){v(e)}),i(m,function(e){S(e,n.saveMessage,n.saveClass)}),localStorage.setItem(l,JSON.stringify(c)),n.callbackAfterSave(e,t),t.id&&""!==t.id||console.log("FORM SAVER WARNING: This form has no ID attribute. This can create conflicts if more than one form is included on a page, or if the URL changes or includes a query string or hash value.")},r.deleteForm=function(e,t,a,o){var n=d(n||s,a||{}),r=u(e?e.getAttribute("data-options"):null);n=d(n,r);var l=t.id&&""!==t.id?"formSaver-"+t.id:"formSaver-"+document.URL,c=t.querySelectorAll("[data-form-status]"),f=""===n.deleteClass?"<div>"+n.deleteMessage+"</div>":'<div class="'+n.deleteClass+'">'+n.deleteMessage+"</div>",m=function(){n.deleteClear===!0||"true"===n.deleteClear?(sessionStorage.setItem(l+"-formSaverMessage",f),location.reload(!1)):i(c,function(e){e.innerHTML=f})};e&&("a"===e.tagName.toLowerCase()||"button"===e.tagName.toLowerCase())&&o&&o.preventDefault(),n.callbackBeforeDelete(e,t),localStorage.removeItem(l),m(),n.callbackAfterDelete(e,t)},r.loadForm=function(e,t){var a=d(a||s,t||{}),o=e.id&&""!==e.id?"formSaver-"+e.id:"formSaver-"+document.URL,n=JSON.parse(localStorage.getItem(o)),r=e.elements,l=e.querySelectorAll("[data-form-status]"),c=function(e){n&&("radio"===e.type.toLowerCase()||"checkbox"===e.type.toLowerCase()?"on"===n[e.name+e.value]&&(e.checked=!0):"hidden"!==e.type.toLowerCase()&&"submit"!==e.type.toLowerCase()&&n[e.name]&&(e.value=n[e.name]))},u=function(e){e.innerHTML=sessionStorage.getItem(o+"-formSaverMessage"),sessionStorage.removeItem(o+"-formSaverMessage")};a.callbackBeforeLoad(e),i(r,function(e){c(e)}),i(l,function(e){u(e)}),a.callbackAfterLoad(e)},r.destroy=function(){t&&(document.documentElement.classList.remove(t.initClass),o&&(i(o,function(e,t){e.removeEventListener("click",c.save[t],!1)}),c.save=[]),n&&(i(n,function(e,t){e.removeEventListener("click",c.del[t],!1)}),c.del=[]),t=null,a=null,o=null,n=null)},r.init=function(e){l&&(r.destroy(),t=d(s,e||{}),a=document.forms,o=document.querySelectorAll("[data-form-save]"),n=document.querySelectorAll("[data-form-delete]"),document.documentElement.className+=(document.documentElement.className?" ":"")+t.initClass,i(o,function(e,a){c.save[a]=r.saveForm.bind(null,e,e.form,t),e.addEventListener("click",c.save[a],!1)}),i(n,function(e,a){c.del[a]=r.deleteForm.bind(null,e,e.form,t),e.addEventListener("click",c.del[a],!1)}),i(a,function(e){r.loadForm(e,t)}))},r});