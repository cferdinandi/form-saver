/** form-saver v8.0.0, by Chris Ferdinandi | http://github.com/cferdinandi/form-saver | Licensed under MIT: http://gomakethings.com/mit/ */
!function(e,t){"function"==typeof define&&define.amd?define([],t(e)):"object"==typeof exports?module.exports=t(e):e.formSaver=t(e)}("undefined"!=typeof global?global:this.window||this.global,function(e){"use strict";var t,a,o={},r=!!document.querySelector&&!!e.addEventListener&&!!e.localStorage,n={deleteClear:!0,saveMessage:"Saved!",deleteMessage:"Deleted!",saveClass:"",deleteClass:"",initClass:"js-form-saver",callbackSave:function(){},callbackDelete:function(){},callbackLoad:function(){}},s=function(e,t,a){if("[object Object]"===Object.prototype.toString.call(e))for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(a,e[o],o,e);else for(var r=0,n=e.length;n>r;r++)t.call(a,e[r],r,e)},l=function(){var e={},t=!1,a=0,o=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(t=arguments[0],a++);for(var r=function(a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=t&&"[object Object]"===Object.prototype.toString.call(a[o])?l(!0,e[o],a[o]):a[o])};o>a;a++){var n=arguments[a];r(n)}return e},c=function(e,t){var a,o,r=t.charAt(0),n="classList"in document.documentElement;for("["===r&&(t=t.substr(1,t.length-2),a=t.split("="),a.length>1&&(o=!0,a[1]=a[1].replace(/"/g,"").replace(/'/g,"")));e&&e!==document;e=e.parentNode){if("."===r)if(n){if(e.classList.contains(t.substr(1)))return e}else if(new RegExp("(^|\\s)"+t.substr(1)+"(\\s|$)").test(e.className))return e;if("#"===r&&e.id===t.substr(1))return e;if("["===r&&e.hasAttribute(a[0])){if(!o)return e;if(e.getAttribute(a[0])===a[1])return e}if(e.tagName.toLowerCase()===t)return e}return null},i=function(e){return e&&"object"==typeof JSON&&"function"==typeof JSON.parse?JSON.parse(e):{}};o.saveForm=function(e,t,a,o){var r=i(e?e.getAttribute("data-options"):null),c=l(c||n,a||{},r||{}),u=document.querySelector(t),d="formSaver-"+u.id,f={},m=u.elements,v=u.querySelectorAll("[data-form-status]"),g=function(e){e.hasAttribute("data-form-no-save")||("radio"===e.type.toLowerCase()||"checkbox"===e.type.toLowerCase()?e.checked===!0&&(f[e.name+e.value]="on"):"hidden"!==e.type.toLowerCase()&&"submit"!==e.type.toLowerCase()&&e.value&&""!==e.value&&(f[e.name]=e.value))},p=function(e,t,a){e.innerHTML=""===a?"<div>"+t+"</div>":'<div class="'+a+'">'+t+"</div>"};s(m,function(e){g(e)}),s(v,function(e){p(e,c.saveMessage,c.saveClass)}),localStorage.setItem(d,JSON.stringify(f)),c.callbackSave(e,u)},o.deleteForm=function(e,t,a,o){var r=i(e?e.getAttribute("data-options"):null),c=l(c||n,a||{},r||{}),u=document.querySelector(t),d="formSaver-"+u.id,f=u.querySelectorAll("[data-form-status]"),m=""===c.deleteClass?"<div>"+c.deleteMessage+"</div>":'<div class="'+c.deleteClass+'">'+c.deleteMessage+"</div>",v=function(){c.deleteClear===!0||"true"===c.deleteClear?(sessionStorage.setItem(d+"-formSaverMessage",m),location.reload(!1)):s(f,function(e){e.innerHTML=m})};localStorage.removeItem(d),v(),c.callbackDelete(e,u)},o.loadForm=function(e,t){var a=l(a||n,t||{}),o="formSaver-"+e.id,r=JSON.parse(localStorage.getItem(o)),c=e.elements,i=e.querySelectorAll("[data-form-status]"),u=function(e){r&&("radio"===e.type.toLowerCase()||"checkbox"===e.type.toLowerCase()?"on"===r[e.name+e.value]&&(e.checked=!0):"hidden"!==e.type.toLowerCase()&&"submit"!==e.type.toLowerCase()&&r[e.name]&&(e.value=r[e.name]))},d=function(e){e.innerHTML=sessionStorage.getItem(o+"-formSaverMessage"),sessionStorage.removeItem(o+"-formSaverMessage")};s(c,function(e){u(e)}),s(i,function(e){d(e)}),a.callbackLoad(e)};var u=function(e){var a=e.target,r=c(a,"[data-form-save]"),n=c(a,"[data-form-delete]");r?(e.preventDefault(),o.saveForm(r,r.getAttribute("data-form-save"),t)):n&&(e.preventDefault(),o.deleteForm(n,n.getAttribute("data-form-delete"),t))};return o.destroy=function(){t&&(document.documentElement.classList.remove(t.initClass),document.removeEventListener("click",u,!1),t=null,a=null)},o.init=function(e){r&&(o.destroy(),t=l(n,e||{}),a=document.forms,document.documentElement.className+=(document.documentElement.className?" ":"")+t.initClass,s(a,function(e){o.loadForm(e,t)}),document.addEventListener("click",u,!1))},o});