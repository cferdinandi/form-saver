/** form-saver v5.2.1, by Chris Ferdinandi | http://github.com/cferdinandi/form-saver | Licensed under MIT: http://gomakethings.com/mit/ */
!function(e,t){"function"==typeof define&&define.amd?define("formSaver",t(e)):"object"==typeof exports?module.exports=t(e):e.formSaver=t(e)}(this,function(e){"use strict";var t,a={},o=!!document.querySelector&&!!e.addEventListener&&!!e.localStorage,r={deleteClear:!0,saveMessage:"Saved!",deleteMessage:"Deleted!",saveClass:"",deleteClass:"",initClass:"js-form-saver",callbackBeforeSave:function(){},callbackAfterSave:function(){},callbackBeforeDelete:function(){},callbackAfterDelete:function(){},callbackBeforeLoad:function(){},callbackAfterLoad:function(){}},n=function(e,t,a){if("[object Object]"===Object.prototype.toString.call(e))for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(a,e[o],o,e);else for(var r=0,n=e.length;n>r;r++)t.call(a,e[r],r,e)},l=function(e,t){var a={};return n(e,function(t,o){a[o]=e[o]}),n(t,function(e,o){a[o]=t[o]}),a},c=function(e){return e.replace(/^\s+|\s+$/g,"")},s=function(e){var t={};return e&&(e=e.split(";"),e.forEach(function(e){e=c(e),""!==e&&(e=e.split(":"),t[e[0]]=c(e[1]))})),t};return a.saveForm=function(e,t,a,o){var c=l(c||r,a||{}),i=s(e?e.getAttribute("data-options"):null);c=l(c,i);var f=t.id&&""!==t.id?"formSaver-"+t.id:"formSaver-"+document.URL,u={},d=t.elements,m=t.querySelectorAll("[data-form-status]"),v=function(e){e.hasAttribute("data-form-no-save")||("radio"===e.type.toLowerCase()||"checkbox"===e.type.toLowerCase()?e.checked===!0&&(u[e.name+e.value]="on"):"hidden"!==e.type.toLowerCase()&&"submit"!==e.type.toLowerCase()&&e.value&&""!==e.value&&(u[e.name]=e.value))},S=function(e,t,a){e.innerHTML='<div class="'+a+'">'+t+"</div>"};e&&("a"===e.tagName.toLowerCase()||"button"===e.tagName.toLowerCase())&&o&&o.preventDefault(),c.callbackBeforeSave(e,t),n(d,function(e){v(e)}),n(m,function(e){S(e,c.saveMessage,c.saveClass)}),localStorage.setItem(f,JSON.stringify(u)),c.callbackAfterSave(e,t),t.id&&""!==t.id||console.log("FORM SAVER WARNING: This form has no ID attribute. This can create conflicts if more than one form is included on a page, or if the URL changes or includes a query string or hash value.")},a.deleteForm=function(e,t,a,o){var c=l(c||r,a||{}),i=s(e.getAttribute("data-options"));c=l(c,i);var f=t.id&&""!==t.id?"formSaver-"+t.id:"formSaver-"+document.URL,u=t.querySelectorAll("[data-form-status]"),d='<div class="'+c.deleteClass+'">'+c.deleteMessage+"</div>",m=function(){c.deleteClear===!0||"true"===c.deleteClear?(sessionStorage.setItem(f+"-formSaverMessage",d),location.reload(!1)):n(u,function(e){e.innerHTML=d})};e&&("a"===e.tagName.toLowerCase()||"button"===e.tagName.toLowerCase())&&o&&o.preventDefault(),c.callbackBeforeDelete(e,t),localStorage.removeItem(f),m(),c.callbackAfterDelete(e,t)},a.loadForm=function(e,t){var a=l(a||r,t||{}),o=e.id&&""!==e.id?"formSaver-"+e.id:"formSaver-"+document.URL,c=JSON.parse(localStorage.getItem(o)),s=e.elements,i=e.querySelectorAll("[data-form-status]"),f=function(e){c&&("radio"===e.type.toLowerCase()||"checkbox"===e.type.toLowerCase()?"on"===c[e.name+e.value]&&(e.checked=!0):"hidden"!==e.type.toLowerCase()&&"submit"!==e.type.toLowerCase()&&c[e.name]&&(e.value=c[e.name]))},u=function(e){e.innerHTML=sessionStorage.getItem(o+"-formSaverMessage"),sessionStorage.removeItem(o+"-formSaverMessage")};a.callbackBeforeLoad(e),n(s,function(e){f(e)}),n(i,function(e){u(e)}),a.callbackAfterLoad(e)},a.init=function(e){if(o){t=l(r,e||{});var c=document.forms,s=document.querySelectorAll("[data-form-save]"),i=document.querySelectorAll("[data-form-delete]");document.documentElement.className+=(document.documentElement.className?" ":"")+t.initClass,n(s,function(e){e.addEventListener("click",a.saveForm.bind(null,e,e.form,t),!1)}),n(i,function(e){e.addEventListener("click",a.deleteForm.bind(null,e,e.form,t),!1)}),n(c,function(e){a.loadForm(e,t)})}},a});