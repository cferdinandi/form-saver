/** form-saver v7.0.0, by Chris Ferdinandi | http://github.com/cferdinandi/form-saver | Licensed under MIT: http://gomakethings.com/mit/ */
!function(e,t){"function"==typeof define&&define.amd?define([],t(e)):"object"==typeof exports?module.exports=t(e):e.formSaver=t(e)}("undefined"!=typeof global?global:this.window||this.global,function(e){"use strict";var t,o,a={},n=!!document.querySelector&&!!e.addEventListener&&!!e.localStorage,r={deleteClear:!0,saveMessage:"Saved!",deleteMessage:"Deleted!",saveClass:"",deleteClass:"",initClass:"js-form-saver",callbackSave:function(){},callbackDelete:function(){},callbackLoad:function(){}},s=function(e){return e&&"object"==typeof JSON&&"function"==typeof JSON.parse?JSON.parse(e):{}};a.saveForm=function(e,t,o,a){var n=s(e?e.getAttribute("data-options"):null),l=buoy.extend(l||r,o||{},n||{}),c=document.querySelector(t),u="formSaver-"+c.id,i={},d=c.elements,m=c.querySelectorAll("[data-form-status]"),f=function(e){e.hasAttribute("data-form-no-save")||("radio"===e.type.toLowerCase()||"checkbox"===e.type.toLowerCase()?e.checked===!0&&(i[e.name+e.value]="on"):"hidden"!==e.type.toLowerCase()&&"submit"!==e.type.toLowerCase()&&e.value&&""!==e.value&&(i[e.name]=e.value))},v=function(e,t,o){e.innerHTML=""===o?"<div>"+t+"</div>":'<div class="'+o+'">'+t+"</div>"};buoy.forEach(d,function(e){f(e)}),buoy.forEach(m,function(e){v(e,l.saveMessage,l.saveClass)}),localStorage.setItem(u,JSON.stringify(i)),l.callbackSave(e,c)},a.deleteForm=function(e,t,o,a){var n=s(e?e.getAttribute("data-options"):null),l=buoy.extend(l||r,o||{},n||{}),c=document.querySelector(t),u="formSaver-"+c.id,i=c.querySelectorAll("[data-form-status]"),d=""===l.deleteClass?"<div>"+l.deleteMessage+"</div>":'<div class="'+l.deleteClass+'">'+l.deleteMessage+"</div>",m=function(){l.deleteClear===!0||"true"===l.deleteClear?(sessionStorage.setItem(u+"-formSaverMessage",d),location.reload(!1)):buoy.forEach(i,function(e){e.innerHTML=d})};localStorage.removeItem(u),m(),l.callbackDelete(e,c)},a.loadForm=function(e,t){var o=buoy.extend(o||r,t||{}),a="formSaver-"+e.id,n=JSON.parse(localStorage.getItem(a)),s=e.elements,l=e.querySelectorAll("[data-form-status]"),c=function(e){n&&("radio"===e.type.toLowerCase()||"checkbox"===e.type.toLowerCase()?"on"===n[e.name+e.value]&&(e.checked=!0):"hidden"!==e.type.toLowerCase()&&"submit"!==e.type.toLowerCase()&&n[e.name]&&(e.value=n[e.name]))},u=function(e){e.innerHTML=sessionStorage.getItem(a+"-formSaverMessage"),sessionStorage.removeItem(a+"-formSaverMessage")};buoy.forEach(s,function(e){c(e)}),buoy.forEach(l,function(e){u(e)}),o.callbackLoad(e)};var l=function(e){var o=e.target,n=buoy.getClosest(o,"[data-form-save]"),r=buoy.getClosest(o,"[data-form-delete]");n?(e.preventDefault(),a.saveForm(n,n.getAttribute("data-form-save"),t)):r&&(e.preventDefault(),a.deleteForm(r,r.getAttribute("data-form-delete"),t))};return a.destroy=function(){t&&(document.documentElement.classList.remove(t.initClass),document.removeEventListener("click",l,!1),t=null,o=null)},a.init=function(e){n&&(a.destroy(),t=buoy.extend(r,e||{}),o=document.forms,document.documentElement.className+=(document.documentElement.className?" ":"")+t.initClass,buoy.forEach(o,function(e){a.loadForm(e,t)}),document.addEventListener("click",l,!1))},a});