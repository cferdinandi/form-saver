/*! form-saver v8.3.0 | (c) 2016 Chris Ferdinandi | MIT License | http://github.com/cferdinandi/form-saver */
!(function(e,t){"function"==typeof define&&define.amd?define([],t(e)):"object"==typeof exports?module.exports=t(e):e.formSaver=t(e)})("undefined"!=typeof global?global:this.window||this.global,(function(e){"use strict";var t,o,a={},r="querySelector"in document&&"addEventListener"in e&&"localStorage"in e&&"classList"in document.createElement("_"),n={selectorStatus:"[data-form-status]",selectorSave:"[data-form-save]",selectorDelete:"[data-form-delete]",selectorIgnore:"[data-form-no-save]",deleteClear:!0,saveMessage:"Saved!",deleteMessage:"Deleted!",saveClass:"",deleteClass:"",initClass:"js-form-saver",callbackSave:function(){},callbackDelete:function(){},callbackLoad:function(){}},l=function(e,t,o){if("[object Object]"===Object.prototype.toString.call(e))for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.call(o,e[a],a,e);else for(var r=0,n=e.length;r<n;r++)t.call(o,e[r],r,e)},c=function(){var e={},t=!1,o=0,a=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(t=arguments[0],o++);for(var r=function(o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(t&&"[object Object]"===Object.prototype.toString.call(o[a])?e[a]=c(!0,e[a],o[a]):e[a]=o[a])};o<a;o++){var n=arguments[o];r(n)}return e},s=function(e,t){for(Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),o=t.length;--o>=0&&t.item(o)!==this;);return o>-1});e&&e!==document;e=e.parentNode)if(e.matches(t))return e;return null},i=function(e){return e&&"object"==typeof JSON&&"function"==typeof JSON.parse?JSON.parse(e):{}};a.saveForm=function(e,t,o,a){var r=i(e?e.getAttribute("data-options"):null),u=c(u||n,o||{},r),m=document.querySelector(t),d="formSaver-"+m.id,f={},v=m.elements,p=m.querySelectorAll(u.selectorStatus),S=function(e){s(e,u.selectorIgnore)||("radio"===e.type.toLowerCase()||"checkbox"===e.type.toLowerCase()?e.checked===!0&&(f[e.name+e.value]="on"):"hidden"!==e.type.toLowerCase()&&"submit"!==e.type.toLowerCase()&&e.value&&""!==e.value&&(f[e.name]=e.value))},y=function(e,t,o){e.innerHTML=""===o?"<div>"+t+"</div>":'<div class="'+o+'">'+t+"</div>"};l(v,(function(e){S(e)})),l(p,(function(e){y(e,u.saveMessage,u.saveClass)})),localStorage.setItem(d,JSON.stringify(f)),u.callbackSave(e,m)},a.deleteForm=function(e,t,o,a){var r=i(e?e.getAttribute("data-options"):{}),s=c(s||n,o||{},r),u=document.querySelector(t),m="formSaver-"+u.id,d=u.querySelectorAll(s.selectorStatus),f=""===s.deleteClass?"<div>"+s.deleteMessage+"</div>":'<div class="'+s.deleteClass+'">'+s.deleteMessage+"</div>",v=function(){s.deleteClear===!0||"true"===s.deleteClear?(sessionStorage.setItem(m+"-formSaverMessage",f),location.reload(!1)):l(d,(function(e){e.innerHTML=f}))};localStorage.removeItem(m),v(),s.callbackDelete(e,u)},a.loadForm=function(e,t){var o=c(o||n,t||{}),a="formSaver-"+e.id,r=JSON.parse(localStorage.getItem(a)),s=e.elements,i=e.querySelectorAll(o.selectorStatus),u=function(e){r&&("radio"===e.type.toLowerCase()||"checkbox"===e.type.toLowerCase()?"on"===r[e.name+e.value]&&(e.checked=!0):"hidden"!==e.type.toLowerCase()&&"submit"!==e.type.toLowerCase()&&r[e.name]&&(e.value=r[e.name]))},m=function(e){e.innerHTML=sessionStorage.getItem(a+"-formSaverMessage"),sessionStorage.removeItem(a+"-formSaverMessage")};l(s,(function(e){u(e)})),l(i,(function(e){m(e)})),o.callbackLoad(e)};var u=function(e){var o=e.target,r=s(o,t.selectorSave),n=s(o,t.selectorDelete);r?(e.preventDefault(),a.saveForm(r,r.getAttribute("data-form-save"),t)):n&&(e.preventDefault(),a.deleteForm(n,n.getAttribute("data-form-delete"),t))};return a.destroy=function(){t&&(document.documentElement.classList.remove(t.initClass),document.removeEventListener("click",u,!1),t=null,o=null)},a.init=function(e){r&&(a.destroy(),t=c(n,e||{}),o=document.forms,document.documentElement.className+=(document.documentElement.className?" ":"")+t.initClass,l(o,(function(e){a.loadForm(e,t)})),document.addEventListener("click",u,!1))},a}));