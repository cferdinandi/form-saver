/** form-saver v5.2.0, by Chris Ferdinandi | http://github.com/cferdinandi/form-saver | Licensed under MIT: http://gomakethings.com/mit/ */
!function(e,t){"function"==typeof define&&define.amd?define("formSaver",t(e)):"object"==typeof exports?module.exports=t(e):e.formSaver=t(e)}(this,function(e){"use strict";var t={},a=!!document.querySelector&&!!e.addEventListener&&!!e.localStorage,o={deleteClear:!0,saveMessage:"Saved!",deleteMessage:"Deleted!",saveClass:"",deleteClass:"",initClass:"js-form-saver",callbackBeforeSave:function(){},callbackAfterSave:function(){},callbackBeforeDelete:function(){},callbackAfterDelete:function(){},callbackBeforeLoad:function(){},callbackAfterLoad:function(){}},r=function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},n=function(e,t,a){if("[object Object]"===Object.prototype.toString.call(e))for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(a,e[o],o,e);else for(var r=0,n=e.length;n>r;r++)t.call(a,e[r],r,e)},l=function(e){return e.replace(/^\s+|\s+$/g,"")},c=function(e){var t={};return e&&(e=e.split(";"),e.forEach(function(e){e=l(e),""!==e&&(e=e.split(":"),t[e[0]]=l(e[1]))})),t};return t.saveForm=function(e,t,a,l){var s=r(o,a||{}),i=c(e?e.getAttribute("data-options"):null);s=r(s,i);var f=t.id&&""!==t.id?"formSaver-"+t.id:"formSaver-"+document.URL,u={},d=t.elements,m=t.querySelectorAll("[data-form-status]"),v=function(e){e.hasAttribute("data-form-no-save")||("radio"===e.type.toLowerCase()||"checkbox"===e.type.toLowerCase()?e.checked===!0&&(u[e.name+e.value]="on"):"hidden"!==e.type.toLowerCase()&&"submit"!==e.type.toLowerCase()&&e.value&&""!==e.value&&(u[e.name]=e.value))},S=function(e,t,a){e.innerHTML='<div class="'+a+'">'+t+"</div>"};e&&("a"===e.tagName.toLowerCase()||"button"===e.tagName.toLowerCase())&&l&&l.preventDefault(),s.callbackBeforeSave(e,t),n(d,function(e){v(e)}),n(m,function(e){S(e,s.saveMessage,s.saveClass)}),localStorage.setItem(f,JSON.stringify(u)),s.callbackAfterSave(e,t),t.id&&""!==t.id||console.log("FORM SAVER WARNING: This form has no ID attribute. This can create conflicts if more than one form is included on a page, or if the URL changes or includes a query string or hash value.")},t.deleteForm=function(e,t,a,l){var s=r(o,a||{}),i=c(e.getAttribute("data-options"));s=r(s,i);var f=t.id&&""!==t.id?"formSaver-"+t.id:"formSaver-"+document.URL,u=t.querySelectorAll("[data-form-status]"),d='<div class="'+s.deleteClass+'">'+s.deleteMessage+"</div>",m=function(){s.deleteClear===!0||"true"===s.deleteClear?(sessionStorage.setItem(f+"-formSaverMessage",d),location.reload(!1)):n(u,function(e){e.innerHTML=d})};e&&("a"===e.tagName.toLowerCase()||"button"===e.tagName.toLowerCase())&&l&&l.preventDefault(),s.callbackBeforeDelete(e,t),localStorage.removeItem(f),m(),s.callbackAfterDelete(e,t)},t.loadForm=function(e,t){var a=r(o,t||{}),l=e.id&&""!==e.id?"formSaver-"+e.id:"formSaver-"+document.URL,c=JSON.parse(localStorage.getItem(l)),s=e.elements,i=e.querySelectorAll("[data-form-status]"),f=function(e){c&&("radio"===e.type.toLowerCase()||"checkbox"===e.type.toLowerCase()?"on"===c[e.name+e.value]&&(e.checked=!0):"hidden"!==e.type.toLowerCase()&&"submit"!==e.type.toLowerCase()&&c[e.name]&&(e.value=c[e.name]))},u=function(e){e.innerHTML=sessionStorage.getItem(l+"-formSaverMessage"),sessionStorage.removeItem(l+"-formSaverMessage")};a.callbackBeforeLoad(e),n(s,function(e){f(e)}),n(i,function(e){u(e)}),a.callbackAfterLoad(e)},t.init=function(e){if(a){var l=r(o,e||{}),c=document.forms,s=document.querySelectorAll("[data-form-save]"),i=document.querySelectorAll("[data-form-delete]");document.documentElement.className+=(document.documentElement.className?" ":"")+l.initClass,n(s,function(e){e.addEventListener("click",t.saveForm.bind(null,e,e.form,l),!1)}),n(i,function(e){e.addEventListener("click",t.deleteForm.bind(null,e,e.form,l),!1)}),n(c,function(e){t.loadForm(e,l)})}},t});