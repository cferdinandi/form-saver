/** form-saver v6.1.4, by Chris Ferdinandi | http://github.com/cferdinandi/form-saver | Licensed under MIT: http://gomakethings.com/mit/ */
!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t:e.formSaver=t(e)}(this,function(e){"use strict";var t,a,o={},r=!!document.querySelector&&!!e.addEventListener&&!!e.localStorage,n={deleteClear:!0,saveMessage:"Saved!",deleteMessage:"Deleted!",saveClass:"",deleteClass:"",initClass:"js-form-saver",callbackBeforeSave:function(){},callbackAfterSave:function(){},callbackBeforeDelete:function(){},callbackAfterDelete:function(){},callbackBeforeLoad:function(){},callbackAfterLoad:function(){}},l=function(e,t,a){if("[object Object]"===Object.prototype.toString.call(e))for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(a,e[o],o,e);else for(var r=0,n=e.length;n>r;r++)t.call(a,e[r],r,e)},s=function(e,t){var a={};return l(e,function(t,o){a[o]=e[o]}),l(t,function(e,o){a[o]=t[o]}),a},c=function(e){return e&&"object"==typeof JSON&&"function"==typeof JSON.parse?JSON.parse(e):{}},i=function(e,t){for(var a=t.charAt(0);e&&e!==document;e=e.parentNode)if("."===a){if(e.classList.contains(t.substr(1)))return e}else if("#"===a){if(e.id===t.substr(1))return e}else if("["===a&&e.hasAttribute(t.substr(1,t.length-2)))return e;return!1};o.saveForm=function(e,t,a){var o=s(o||n,a||{}),r=c(e?e.getAttribute("data-options"):null);o=s(o,r);var i=document.querySelector(t),u="formSaver-"+i.id,f={},d=i.elements,m=i.querySelectorAll("[data-form-status]"),v=function(e){e.hasAttribute("data-form-no-save")||("radio"===e.type.toLowerCase()||"checkbox"===e.type.toLowerCase()?e.checked===!0&&(f[e.name+e.value]="on"):"hidden"!==e.type.toLowerCase()&&"submit"!==e.type.toLowerCase()&&e.value&&""!==e.value&&(f[e.name]=e.value))},b=function(e,t,a){e.innerHTML=""===a?"<div>"+t+"</div>":'<div class="'+a+'">'+t+"</div>"};o.callbackBeforeSave(e,i),l(d,function(e){v(e)}),l(m,function(e){b(e,o.saveMessage,o.saveClass)}),localStorage.setItem(u,JSON.stringify(f)),o.callbackAfterSave(e,i)},o.deleteForm=function(e,t,a){var o=s(o||n,a||{}),r=c(e?e.getAttribute("data-options"):null);o=s(o,r);var i=document.querySelector(t),u="formSaver-"+i.id,f=i.querySelectorAll("[data-form-status]"),d=""===o.deleteClass?"<div>"+o.deleteMessage+"</div>":'<div class="'+o.deleteClass+'">'+o.deleteMessage+"</div>",m=function(){o.deleteClear===!0||"true"===o.deleteClear?(sessionStorage.setItem(u+"-formSaverMessage",d),location.reload(!1)):l(f,function(e){e.innerHTML=d})};o.callbackBeforeDelete(e,i),localStorage.removeItem(u),m(),o.callbackAfterDelete(e,i)},o.loadForm=function(e,t){var a=s(a||n,t||{}),o="formSaver-"+e.id,r=JSON.parse(localStorage.getItem(o)),c=e.elements,i=e.querySelectorAll("[data-form-status]"),u=function(e){r&&("radio"===e.type.toLowerCase()||"checkbox"===e.type.toLowerCase()?"on"===r[e.name+e.value]&&(e.checked=!0):"hidden"!==e.type.toLowerCase()&&"submit"!==e.type.toLowerCase()&&r[e.name]&&(e.value=r[e.name]))},f=function(e){e.innerHTML=sessionStorage.getItem(o+"-formSaverMessage"),sessionStorage.removeItem(o+"-formSaverMessage")};a.callbackBeforeLoad(e),l(c,function(e){u(e)}),l(i,function(e){f(e)}),a.callbackAfterLoad(e)};var u=function(e){var a=e.target,r=i(a,"[data-form-save]"),n=i(a,"[data-form-delete]");r?(e.preventDefault(),o.saveForm(r,r.getAttribute("data-form-save"),t)):n&&(e.preventDefault(),o.deleteForm(n,n.getAttribute("data-form-delete"),t))};return o.destroy=function(){t&&(document.documentElement.classList.remove(t.initClass),document.removeEventListener("click",u,!1),t=null,a=null)},o.init=function(e){r&&(o.destroy(),t=s(n,e||{}),a=document.forms,document.documentElement.className+=(document.documentElement.className?" ":"")+t.initClass,l(a,function(e){o.loadForm(e,t)}),document.addEventListener("click",u,!1))},o});